<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>WebD2: Building a Custom Video Player</title>
<!-- Hack to get IE to recognize  HTML5 elements-->
<!-- See http://remysharp.com/2009/01/07/html5-enabling-script/comment-page-3/#allcomments-->
<!--[if IE]>
<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../../styles/webd2.css" media="screen">
<link type="text/css" rel="stylesheet" href="../../../styles/webd2_print.css" media="print">
</head>
<body id="studentPage">
<div id="wrapper">
<div id="banner" role="banner">
<div id="siteTitle">Web Design &amp; Development I</div>
<div id="version">Version 2.0</div>
<div id="subTitle">Student Version</div>
</div>
<nav role="navigation" aria-label="Main menu">
<ul>
<li><a href="../../../student/index.html">Home</a></li>
<li><a href="../../../student/lessons.html">Lessons</a></li>
<li><a href="../../../student/resources.html">Resources</a></li>
<li id="btnPrev"><a href="../../../student/unit5/module2/lesson5.html">Previous</a></li>
<li id="btnNext"><a href="../../../student/unit5/module3/index.html">Next</a></li>
</ul>
</nav>
<div id="main" role="main">
<div class="breadCrumbs" role="navigation" aria-label="Bread Crumbs"><a href="../index.html">UNIT 5</a> > <a href="index.html">MODULE 2</a></div>
<h1>Lesson 6: Building a Custom Video Player</h1>


<h2>Overview</h2> 
<p>Earlier in this course you learned to <a href="../../unit2/module6/index.html">add video to web pages</a> using the <span class="element">&lt;video&gt;</span> element. After doing so you observed that the built-in video player is slightly different in every browser. If you want a player that looks consistent across all browsers, or if you just a want a player that is uniquely your own, you can totally do that with JavaScript.</p>

<p>In this lesson, you will use JavaScript to build custom controls for playing your video, and will use your custom controls to replace the browser's built-in  controls.</p>

<h2>Learner Outcomes</h2>
<p>At the completion of this exercise:</p>
<ul>
  <li>you will be able to explain what an API is, and how you can use it to control the content of web pages.</li>
	<li>you will be able to use JavaScript to control the HTML5 video element.</li>
</ul>

<h2>The HTML5 Media API</h2>

<p>Once you've embedded media into your web page using the new HTML5 &lt;audio&gt; or &lt;video&gt; elements, you can control them using JavaScript code. This is because HTML5 has an API that enables external control of these elements. API stands for "application program interface", and it consists of a set of variables and methods that can be accessed by external scripts or programs. APIs are common on the web. A few popular examples include:</p>
<ul>
  <li><a href="https://www.flickr.com/services/developer/">Flickr API</a> for managing photos</li>
  <li><a href="https://developers.google.com/youtube/">YouTube API</a> for managing videos</li> 
  <li><a href="https://dev.twitter.com/docs">Twitter API</a> for creating new Twitter applications</li>
  <li><a href="https://developers.facebook.com/docs">Facebook API</a> for developing Facebook apps</li> 
  <li><a href="https://developers.google.com/maps/documentation/javascript/">Google Maps JavaScript API</a></li>
</ul>

<p>The documentation for APIs such as those linked above are technical and can be overwhelming at first, but buried within all the technical details are typically some simple examples to help you get started.</p>
  
<p>The official documentation for the HTML5 media API is contained within <a href="http://www.w3.org/TR/html5/embedded-content-0.html#htmlmediaelement">the HTML5 spec</a>. The following activities give you a much-simplified look at the basics.</p>

<h2>Activities</h2>

<ul>  
  <li>Open <span class="filename">video.html</span> in both your web editor and browser.</li>

  <li>In your source code, add an <span class="attribute">id</span> attribute to your &lt;video&gt; element. The id can be anything, but let's assume you use <span class="attribute">id="myvideo"</span>. Adding an id makes it easier to reference the video using JavaScript.
  </li>
  
  <li>Remove the <span class="attribute">controls</span> attribute from the &lt;video&gt; element. You're going to build your own controls, so you don't need the browser's built-in controls anymore.</li> 
  
  <li>Below the video element, add a new &lt;div&gt; element and fill it with &lt;button&gt; elements that will be used to control the player, like this:
<pre class="example">
&lt;div id="myplayer"&gt;
  &lt;button onclick="play()"&gt;Play&lt;/button&gt;
  &lt;button onclick="pause()"&gt;Pause&lt;/button&gt;
  &lt;button onclick="changeSpeed('up')"&gt;Faster&lt;/button&gt;
  &lt;button onclick="changeSpeed('down')"&gt;Slower&lt;/button&gt;
  &lt;button onclick="changeVolume('up')"&gt;Louder&lt;/button&gt;
  &lt;button onclick="changeVolume('down')"&gt;Softer&lt;/button&gt;
&lt;/div&gt;    
</pre> 
  </li>
  
  <li>Use your CSS skills to stylize these buttons however you like. Add opening and closing style tags (<span class="element">&lt;style&gt;</span> and <span class="element">&lt;/style&gt;</span>) to the top of the source code, inside the &lt;head&gt; element. Then, add your CSS to this new style section. Since these styles only affect the player buttons on this one page, you don't need to add them to the sitewide external style sheet.</li>  

  <li>Each of these buttons calls a JavaScript function <em>onclick</em> (that is, when a user clicks the button or presses Enter). To make these buttons work, you now need to add the JavaScript functions. Start by adding opening and closing script tags (<span class="element">&lt;script&gt;</span> and <span class="element">&lt;/script&gt;</span>) to your source code, inside the &lt;head&gt; element. These can go anywhere in the head section, but one good spot would be immediately beneath the style section that you added in the previous step.</li>
  
  <li>Inside the new &lt;script&gt; element, copy and paste the code that is provided below. Study the comments to be sure you understand how it works.</li>
  
  <li>Save your file and view the page in your browser. Does it work? Try playing around with the JavaScript code to see if you can change its behavior.</li>
  
</ul>

<h2>The Custom Player JavaScript Code</h2>

<pre class="example">
// create a few global variables to be used later 
var video, speed, volume;
      
function init() { 
  // initialize the player 
  // first, get the media element and assign it to the video variable
  video = document.getElementById('myvideo');      

  // get the current playbackRate from the HTML5 media API 
  // range is 0 to very fast, with 1 being normal playback 
  speed = video.playbackRate;         

  // volume range is 0 to 1 
  // set it in the middle so we have room to move it with our buttons
  volume = 0.5;
  video.volume = volume; 
}
             
function play() {       
  video.play(); 
}
      
function pause() {       
  video.pause();
}
      
function changeSpeed(direction) { 
  // direction is either 'up' (faster) or 'down' (slower) 
  if (direction == 'up') { 
    if (speed &lt; 10) { 
      // increase playbackRate 
      speed = speed + 0.1; 
    }
  }  
  else if (direction == 'down') { 
    if (speed &gt; 0) {
      // decrease playbackRate
      speed = speed - 0.1; 
    }
  }
  // so far all we've done is change the value of our speed variable 
  // not let's assign it to the player 
  video.playbackRate = speed;           
}
      
function changeVolume(direction) { 
  if (direction == 'up') { 
    // if not fully cranked yet, increase volume 
    if (volume &lt; 0.9) {
      volume = volume + 0.1; 
    }
  }  
  else if (direction == 'down') { 
    // if not muted, decrease volume
    if (volume &gt; 0.1) {  
      volume = volume - 0.1; 
    }
  }       
  // so far all we've done is change the value of our volume variable 
  // not let's assign it to the player 
  video.volume = volume;            
} 
      
// wait until the web page has finished loading, then run the init function
window.onload = init;
</pre>


<p>One problem that's beyond the scope of this course is captions. Some browsers continue to display captions even without the <span class="attribute">controls</span> attribute, but most do not. Therefore, when building a custom controller you would also need to build in support for closed captions. Terrill Thompson, co-author of this curriculum, has built an open source video player called <a href="http://terrillthompson.com/ableplayer">AblePlayer</a> that includes support for captions plus a wide variety of additional features. Since it's open source, you're free to download it, study the source code, play around with JavaScript, and learn from its example.</p>  

<h2>All done?</h2>
  <p>Share your web page with your instructor. If all is well, proceed to <a href="lesson7.html">the next lesson</a>.</p>

<footer role="contentinfo">
Copyright &copy; 2005-2014 by University of Washington. Permission is granted to use these materials in whole or in part for educational, noncommercial purposes provided the source is acknowledged. This product was created with support from the National Institute on Disability and Rehabilitation Research of the U.S. Department of Education (grant #H133D010306), and is maintained with support from the National Science Foundation (grant #CNS-0540615). The contents do not necessarily represent the policies of the U.S. federal government, and you should not assume their endorsement.</footer>
</div>
</div>
</body>
</html>
